{"ast":null,"code":"import _classCallCheck from\"/media/tomrlh/Ubuntu_Data/tomrlh/Documents/Programming_Projects/Freelancers/deliverydofran6/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/media/tomrlh/Ubuntu_Data/tomrlh/Documents/Programming_Projects/Freelancers/deliverydofran6/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/media/tomrlh/Ubuntu_Data/tomrlh/Documents/Programming_Projects/Freelancers/deliverydofran6/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/media/tomrlh/Ubuntu_Data/tomrlh/Documents/Programming_Projects/Freelancers/deliverydofran6/node_modules/@babel/runtime/helpers/esm/inherits\";import React from\"react\";import{Button,Form,Header,Icon,Input,Modal,Segment,Table,TextArea}from\"semantic-ui-react\";import{Subscribe}from\"unstated\";import ProductsContainer from\"../containers/ProductsContainer\";import OrderContainer from\"../containers/OrderContainer\";import NumberFormat from\"react-number-format\";var AdditionalsModal=/*#__PURE__*/function(_React$Component){_inherits(AdditionalsModal,_React$Component);var _super=_createSuper(AdditionalsModal);function AdditionalsModal(){var _this;_classCallCheck(this,AdditionalsModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={open:false,qtt:0,additionals:[]};_this.handleOpen=function(){return _this.setState({modalOpen:true});};_this.handleClose=function(){return _this.setState({modalOpen:false});};return _this;}_createClass(AdditionalsModal,[{key:\"addToAdditional\",value:function addToAdditional(additional){var newAddArr=this.state.additionals;if(newAddArr.length<=0||!newAddArr.filter(function(add){return add.id===additional.id;})[0]){additional.qtt+=1;newAddArr.push(additional);}else{newAddArr=this.state.additionals.map(function(add){if(add.id===additional.id)add.qtt+=1;add.total=add.price*add.qtt;return add;});}this.setState({additionals:newAddArr});}},{key:\"subtractFromAdditional\",value:function subtractFromAdditional(id){this.setState({additionals:this.state.additionals.map(function(add){if(add.id===id&&add.qtt>0){add.qtt-=1;}return add;})});}},{key:\"showQuantity\",value:function showQuantity(id){var add=this.state.additionals.filter(function(add){return add.id===id;})[0];return add?add.qtt:0;}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(Subscribe,{to:[ProductsContainer,OrderContainer]},function(productContainer,orderContainer){return/*#__PURE__*/React.createElement(Modal,{className:\"my-modal\",size:\"mini\",open:_this2.state.modalOpen,onClose:_this2.handleClose,trigger:/*#__PURE__*/React.createElement(Button,{basic:true,color:\"green\",icon:\"cart plus\",size:\"tiny\",onClick:_this2.handleOpen})},/*#__PURE__*/React.createElement(Modal.Content,null,/*#__PURE__*/React.createElement(Modal.Description,null,/*#__PURE__*/React.createElement(Header,{as:\"h4\"},\"Adicionais\"),/*#__PURE__*/React.createElement(Segment,{style:{overflow:\"auto\",maxHeight:200}},/*#__PURE__*/React.createElement(Table,{striped:true,textAlign:\"center\",size:\"small\",basic:\"very\"},/*#__PURE__*/React.createElement(Table.Body,null,productContainer.state.additionals.map(function(additional){return/*#__PURE__*/React.createElement(Table.Row,null,/*#__PURE__*/React.createElement(Table.Cell,null,additional.name),/*#__PURE__*/React.createElement(Table.Cell,null,/*#__PURE__*/React.createElement(NumberFormat,{value:additional.price,displayType:\"text\",prefix:\"R$ \",thousandSeparator:\".\",decimalSeparator:\",\",fixedDecimalScale:true,decimalScale:2,renderText:function renderText(value){return/*#__PURE__*/React.createElement(\"span\",null,value);}})),/*#__PURE__*/React.createElement(Table.Cell,null,/*#__PURE__*/React.createElement(Button.Group,null,/*#__PURE__*/React.createElement(Button,{color:\"green\",size:\"tiny\",onClick:function onClick(){_this2.addToAdditional(additional);}},\"+\"),/*#__PURE__*/React.createElement(Button.Or,{text:_this2.showQuantity(additional.id)}),/*#__PURE__*/React.createElement(Button,{color:\"red\",size:\"tiny\",onClick:function onClick(){_this2.subtractFromAdditional(additional.id);}},\"-\"))));})),/*#__PURE__*/React.createElement(\"br\",null))),/*#__PURE__*/React.createElement(Modal.Actions,null,/*#__PURE__*/React.createElement(Button,{content:\"adicionar\",color:\"green\",icon:\"cart plus\",size:\"tiny\",onClick:function onClick(){orderContainer.addToBag({id:orderContainer.state.bag.length+_this2.props.item.name,name:_this2.props.item.name,price:_this2.props.item.price,additionals:_this2.state.additionals});_this2.handleClose();console.log(_this2.state.additionals);_this2.props.showAlert(_this2.props.item.name);}})))));});}}]);return AdditionalsModal;}(React.Component);export default AdditionalsModal;","map":{"version":3,"sources":["/media/tomrlh/Ubuntu_Data/tomrlh/Documents/Programming_Projects/Freelancers/deliverydofran6/src/components/AdditionalsModal.js"],"names":["React","Button","Form","Header","Icon","Input","Modal","Segment","Table","TextArea","Subscribe","ProductsContainer","OrderContainer","NumberFormat","AdditionalsModal","state","open","qtt","additionals","handleOpen","setState","modalOpen","handleClose","additional","newAddArr","length","filter","add","id","push","map","total","price","productContainer","orderContainer","overflow","maxHeight","name","value","addToAdditional","showQuantity","subtractFromAdditional","addToBag","bag","props","item","console","log","showAlert","Component"],"mappings":"wqBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OACEC,MADF,CAEEC,IAFF,CAGEC,MAHF,CAIEC,IAJF,CAKEC,KALF,CAMEC,KANF,CAOEC,OAPF,CAQEC,KARF,CASEC,QATF,KAUO,mBAVP,CAWA,OAASC,SAAT,KAA0B,UAA1B,CACA,MAAOC,CAAAA,iBAAP,KAA8B,iCAA9B,CACA,MAAOC,CAAAA,cAAP,KAA2B,8BAA3B,CACA,MAAOC,CAAAA,YAAP,KAAyB,qBAAzB,C,GAEMC,CAAAA,gB,+WACJC,K,CAAQ,CACNC,IAAI,CAAE,KADA,CAENC,GAAG,CAAE,CAFC,CAGNC,WAAW,CAAE,EAHP,C,OA0CRC,U,CAAa,iBAAM,OAAKC,QAAL,CAAc,CAAEC,SAAS,CAAE,IAAb,CAAd,CAAN,E,OAEbC,W,CAAc,iBAAM,OAAKF,QAAL,CAAc,CAAEC,SAAS,CAAE,KAAb,CAAd,CAAN,E,oGAtCEE,U,CAAY,CAC1B,GAAIC,CAAAA,SAAS,CAAG,KAAKT,KAAL,CAAWG,WAA3B,CAEA,GACEM,SAAS,CAACC,MAAV,EAAoB,CAApB,EACA,CAACD,SAAS,CAACE,MAAV,CAAiB,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,EAAJ,GAAWL,UAAU,CAACK,EAA/B,EAAjB,EAAoD,CAApD,CAFH,CAGE,CACAL,UAAU,CAACN,GAAX,EAAkB,CAAlB,CACAO,SAAS,CAACK,IAAV,CAAeN,UAAf,EACD,CAND,IAMO,CACLC,SAAS,CAAG,KAAKT,KAAL,CAAWG,WAAX,CAAuBY,GAAvB,CAA2B,SAACH,GAAD,CAAS,CAC9C,GAAIA,GAAG,CAACC,EAAJ,GAAWL,UAAU,CAACK,EAA1B,CAA8BD,GAAG,CAACV,GAAJ,EAAW,CAAX,CAC9BU,GAAG,CAACI,KAAJ,CAAYJ,GAAG,CAACK,KAAJ,CAAYL,GAAG,CAACV,GAA5B,CACA,MAAOU,CAAAA,GAAP,CACD,CAJW,CAAZ,CAKD,CAED,KAAKP,QAAL,CAAc,CAAEF,WAAW,CAAEM,SAAf,CAAd,EACD,C,sEAEsBI,E,CAAI,CACzB,KAAKR,QAAL,CAAc,CACZF,WAAW,CAAE,KAAKH,KAAL,CAAWG,WAAX,CAAuBY,GAAvB,CAA2B,SAACH,GAAD,CAAS,CAC/C,GAAIA,GAAG,CAACC,EAAJ,GAAWA,EAAX,EAAiBD,GAAG,CAACV,GAAJ,CAAU,CAA/B,CAAkC,CAChCU,GAAG,CAACV,GAAJ,EAAW,CAAX,CACD,CACD,MAAOU,CAAAA,GAAP,CACD,CALY,CADD,CAAd,EAQD,C,kDAEYC,E,CAAI,CACf,GAAID,CAAAA,GAAG,CAAG,KAAKZ,KAAL,CAAWG,WAAX,CAAuBQ,MAAvB,CAA8B,SAACC,GAAD,QAASA,CAAAA,GAAG,CAACC,EAAJ,GAAWA,EAApB,EAA9B,EAAsD,CAAtD,CAAV,CACA,MAAOD,CAAAA,GAAG,CAAGA,GAAG,CAACV,GAAP,CAAa,CAAvB,CACD,C,uCAMQ,iBACP,mBACE,oBAAC,SAAD,EAAW,EAAE,CAAE,CAACN,iBAAD,CAAoBC,cAApB,CAAf,EACG,SAACqB,gBAAD,CAAmBC,cAAnB,qBACC,oBAAC,KAAD,EACE,SAAS,CAAC,UADZ,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAE,MAAI,CAACnB,KAAL,CAAWM,SAHnB,CAIE,OAAO,CAAE,MAAI,CAACC,WAJhB,CAKE,OAAO,cACL,oBAAC,MAAD,EACE,KAAK,KADP,CAEE,KAAK,CAAC,OAFR,CAGE,IAAI,CAAC,WAHP,CAIE,IAAI,CAAC,MAJP,CAKE,OAAO,CAAE,MAAI,CAACH,UALhB,EANJ,eAeE,oBAAC,KAAD,CAAO,OAAP,mBACE,oBAAC,KAAD,CAAO,WAAP,mBACE,oBAAC,MAAD,EAAQ,EAAE,CAAC,IAAX,eADF,cAEE,oBAAC,OAAD,EAAS,KAAK,CAAE,CAAEgB,QAAQ,CAAE,MAAZ,CAAoBC,SAAS,CAAE,GAA/B,CAAhB,eACE,oBAAC,KAAD,EAAO,OAAO,KAAd,CAAe,SAAS,CAAC,QAAzB,CAAkC,IAAI,CAAC,OAAvC,CAA+C,KAAK,CAAC,MAArD,eACE,oBAAC,KAAD,CAAO,IAAP,MACGH,gBAAgB,CAAClB,KAAjB,CAAuBG,WAAvB,CAAmCY,GAAnC,CAAuC,SAACP,UAAD,qBACtC,oBAAC,KAAD,CAAO,GAAP,mBACE,oBAAC,KAAD,CAAO,IAAP,MAAaA,UAAU,CAACc,IAAxB,CADF,cAEE,oBAAC,KAAD,CAAO,IAAP,mBACE,oBAAC,YAAD,EACE,KAAK,CAAEd,UAAU,CAACS,KADpB,CAEE,WAAW,CAAE,MAFf,CAGE,MAAM,CAAE,KAHV,CAIE,iBAAiB,CAAE,GAJrB,CAKE,gBAAgB,CAAE,GALpB,CAME,iBAAiB,CAAE,IANrB,CAOE,YAAY,CAAE,CAPhB,CAQE,UAAU,CAAE,oBAACM,KAAD,qBAAW,gCAAOA,KAAP,CAAX,EARd,EADF,CAFF,cAcE,oBAAC,KAAD,CAAO,IAAP,mBACE,oBAAC,MAAD,CAAQ,KAAR,mBACE,oBAAC,MAAD,EACE,KAAK,CAAC,OADR,CAEE,IAAI,CAAC,MAFP,CAGE,OAAO,CAAE,kBAAM,CACb,MAAI,CAACC,eAAL,CAAqBhB,UAArB,EACD,CALH,MADF,cAUE,oBAAC,MAAD,CAAQ,EAAR,EACE,IAAI,CAAE,MAAI,CAACiB,YAAL,CAAkBjB,UAAU,CAACK,EAA7B,CADR,EAVF,cAaE,oBAAC,MAAD,EACE,KAAK,CAAC,KADR,CAEE,IAAI,CAAC,MAFP,CAGE,OAAO,CAAE,kBAAM,CACb,MAAI,CAACa,sBAAL,CAA4BlB,UAAU,CAACK,EAAvC,EACD,CALH,MAbF,CADF,CAdF,CADsC,EAAvC,CADH,CADF,cA6CE,8BA7CF,CADF,CAFF,cAoDE,oBAAC,KAAD,CAAO,OAAP,mBACE,oBAAC,MAAD,EACE,OAAO,CAAC,WADV,CAEE,KAAK,CAAC,OAFR,CAGE,IAAI,CAAC,WAHP,CAIE,IAAI,CAAC,MAJP,CAKE,OAAO,CAAE,kBAAM,CACbM,cAAc,CAACQ,QAAf,CAAwB,CACtBd,EAAE,CACAM,cAAc,CAACnB,KAAf,CAAqB4B,GAArB,CAAyBlB,MAAzB,CACA,MAAI,CAACmB,KAAL,CAAWC,IAAX,CAAgBR,IAHI,CAItBA,IAAI,CAAE,MAAI,CAACO,KAAL,CAAWC,IAAX,CAAgBR,IAJA,CAKtBL,KAAK,CAAE,MAAI,CAACY,KAAL,CAAWC,IAAX,CAAgBb,KALD,CAMtBd,WAAW,CAAE,MAAI,CAACH,KAAL,CAAWG,WANF,CAAxB,EAQA,MAAI,CAACI,WAAL,GACAwB,OAAO,CAACC,GAAR,CAAY,MAAI,CAAChC,KAAL,CAAWG,WAAvB,EACA,MAAI,CAAC0B,KAAL,CAAWI,SAAX,CAAqB,MAAI,CAACJ,KAAL,CAAWC,IAAX,CAAgBR,IAArC,EACD,CAjBH,EADF,CApDF,CADF,CAfF,CADD,EADH,CADF,CAkGD,C,8BAlJ4BrC,KAAK,CAACiD,S,EAqJrC,cAAenC,CAAAA,gBAAf","sourcesContent":["import React from \"react\";\nimport {\n  Button,\n  Form,\n  Header,\n  Icon,\n  Input,\n  Modal,\n  Segment,\n  Table,\n  TextArea,\n} from \"semantic-ui-react\";\nimport { Subscribe } from \"unstated\";\nimport ProductsContainer from \"../containers/ProductsContainer\";\nimport OrderContainer from \"../containers/OrderContainer\";\nimport NumberFormat from \"react-number-format\";\n\nclass AdditionalsModal extends React.Component {\n  state = {\n    open: false,\n    qtt: 0,\n    additionals: [],\n  };\n\n  addToAdditional(additional) {\n    let newAddArr = this.state.additionals;\n\n    if (\n      newAddArr.length <= 0 ||\n      !newAddArr.filter((add) => add.id === additional.id)[0]\n    ) {\n      additional.qtt += 1;\n      newAddArr.push(additional);\n    } else {\n      newAddArr = this.state.additionals.map((add) => {\n        if (add.id === additional.id) add.qtt += 1;\n        add.total = add.price * add.qtt;\n        return add;\n      });\n    }\n\n    this.setState({ additionals: newAddArr });\n  }\n\n  subtractFromAdditional(id) {\n    this.setState({\n      additionals: this.state.additionals.map((add) => {\n        if (add.id === id && add.qtt > 0) {\n          add.qtt -= 1;\n        }\n        return add;\n      }),\n    });\n  }\n\n  showQuantity(id) {\n    let add = this.state.additionals.filter((add) => add.id === id)[0];\n    return add ? add.qtt : 0;\n  }\n\n  handleOpen = () => this.setState({ modalOpen: true });\n\n  handleClose = () => this.setState({ modalOpen: false });\n\n  render() {\n    return (\n      <Subscribe to={[ProductsContainer, OrderContainer]}>\n        {(productContainer, orderContainer) => (\n          <Modal\n            className=\"my-modal\"\n            size=\"mini\"\n            open={this.state.modalOpen}\n            onClose={this.handleClose}\n            trigger={\n              <Button\n                basic\n                color=\"green\"\n                icon=\"cart plus\"\n                size=\"tiny\"\n                onClick={this.handleOpen}\n              />\n            }\n          >\n            <Modal.Content>\n              <Modal.Description>\n                <Header as=\"h4\">Adicionais</Header>\n                <Segment style={{ overflow: \"auto\", maxHeight: 200 }}>\n                  <Table striped textAlign=\"center\" size=\"small\" basic=\"very\">\n                    <Table.Body>\n                      {productContainer.state.additionals.map((additional) => (\n                        <Table.Row>\n                          <Table.Cell>{additional.name}</Table.Cell>\n                          <Table.Cell>\n                            <NumberFormat\n                              value={additional.price}\n                              displayType={\"text\"}\n                              prefix={\"R$ \"}\n                              thousandSeparator={\".\"}\n                              decimalSeparator={\",\"}\n                              fixedDecimalScale={true}\n                              decimalScale={2}\n                              renderText={(value) => <span>{value}</span>}\n                            />\n                          </Table.Cell>\n                          <Table.Cell>\n                            <Button.Group>\n                              <Button\n                                color=\"green\"\n                                size=\"tiny\"\n                                onClick={() => {\n                                  this.addToAdditional(additional);\n                                }}\n                              >\n                                +\n                              </Button>\n                              <Button.Or\n                                text={this.showQuantity(additional.id)}\n                              />\n                              <Button\n                                color=\"red\"\n                                size=\"tiny\"\n                                onClick={() => {\n                                  this.subtractFromAdditional(additional.id);\n                                }}\n                              >\n                                -\n                              </Button>\n                            </Button.Group>\n                          </Table.Cell>\n                        </Table.Row>\n                      ))}\n                    </Table.Body>\n                    <br />\n                  </Table>\n                </Segment>\n\n                <Modal.Actions>\n                  <Button\n                    content=\"adicionar\"\n                    color=\"green\"\n                    icon=\"cart plus\"\n                    size=\"tiny\"\n                    onClick={() => {\n                      orderContainer.addToBag({\n                        id:\n                          orderContainer.state.bag.length +\n                          this.props.item.name,\n                        name: this.props.item.name,\n                        price: this.props.item.price,\n                        additionals: this.state.additionals,\n                      });\n                      this.handleClose();\n                      console.log(this.state.additionals);\n                      this.props.showAlert(this.props.item.name);\n                    }}\n                  />\n                </Modal.Actions>\n              </Modal.Description>\n            </Modal.Content>\n          </Modal>\n        )}\n      </Subscribe>\n    );\n  }\n}\n\nexport default AdditionalsModal;\n"]},"metadata":{},"sourceType":"module"}